---
name: senior-dev-validator
description: 適用於程式碼修改、重構與新增功能。強制執行「架構一致性檢查」，並在修改後自動執行「編譯」、「測試」與「運行驗證」，確保代碼高品質且可穩定執行。
---

# 資深開發與全週期驗證技能 (Senior Dev Validator)

身為開發代理，你必須在「修改代碼後」與「回覆使用者前」，完成以下從架構到執行的完整驗證流程。

## 1. 架構與邏輯一致性檢查 (Architectural Consistency)
在動手修改或建立檔案前，必須先確保設計符合專案既有架構：
- **路徑規範**：分析現有目錄結構（如 MVC, DDD）。檔案必須放在對應職責的資料夾（如 `Services/`, `Controllers/`, `Models/`）。
- **命名空間對齊**：C# 檔案的 `namespace` 必須與其所在的資料夾路徑完全一致。
- **職責分離**：檢查邏輯是否放錯層級，禁止將業務邏輯與 UI 程式碼混合。

## 2. 環境診斷與編譯 (Compile)
- **.NET/ASP.NET**: 必須執行 `dotnet build` 確保編譯通過。
- **Node.js/React**: 執行 `npm run build` 或語法檢查 (Lint)，確保無編譯錯誤。
- **自我修正**: 若編譯失敗，必須根據報錯內容修正代碼，直到編譯通過。

## 3. 自動化測試驗證 (Test)
- **主動搜尋**: 檢查專案中是否有 `tests/`, `*.Tests/` 目錄或 `package.json` 中的測試腳本。
- **執行指令**: 優先執行 `dotnet test` 或 `npm test`。
- **修復義務**: 若測試失敗，應分析原因並修復，直到測試通過或確認失敗原因與本次修改無關。

## 4. 運行時功能驗證 (Run & Browser)
- **服務啟動**: 若修改涉及 API 或後端服務，嘗試啟動並檢查啟動 Log 是否有 Exception。
- **前端驗證**: 若修改涉及 Web UI，必須調用 **Browser Subagent**：
  1. 前往對應的網址 (如 localhost)。
  2. 檢查 Browser Console 是否有紅色報錯 (Errors)。
  3. 驗證 UI 組件是否按預期渲染。

## 5. 回覆準則 (Output Format)
在你的回覆末尾，必須附加以下格式的報告：

---
### 🛡️ 開發品質與驗證報告 (Senior Dev Validator)
- **架構一致性**: [已確認檔案位置與 Namespace 符合規範]
- **編譯狀態**: [成功/失敗/跳過] (檢附關鍵 Log 行)
- **測試結果**: [通過數量/總數] (指令：`{執行的指令}`)
- **運行驗證**: [已透過 Browser Subagent 檢查主控台無誤]
- **結論**: 程式碼已通過架構檢查與功能驗證，可穩定執行。
---

## 使用時機
- 當使用者要求：「幫我改 Bug / 新增功能 / 重構邏輯」。
- 任何涉及「檔案新增、移動或程式碼變更」的對話。